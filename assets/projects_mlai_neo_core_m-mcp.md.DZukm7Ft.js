import{_ as a,c as n,o as i,ag as t}from"./chunks/framework.By5zrZ8k.js";const k=JSON.parse('{"title":"MCP (Model Context Protocol) User Guide","description":"","frontmatter":{},"headers":[],"relativePath":"projects/mlai/neo/core/m-mcp.md","filePath":"projects/mlai/neo/core/m-mcp.md","lastUpdated":1768229013000}'),e={name:"projects/mlai/neo/core/m-mcp.md"};function l(p,s,o,h,r,d){return i(),n("div",null,[...s[0]||(s[0]=[t(`<h1 id="mcp-model-context-protocol-user-guide" tabindex="-1">MCP (Model Context Protocol) User Guide <a class="header-anchor" href="#mcp-model-context-protocol-user-guide" aria-label="Permalink to &quot;MCP (Model Context Protocol) User Guide&quot;">â€‹</a></h1><p>This guide explains how to configure and use the Model Context Protocol (MCP) integration with the NetApp Connector, enabling AI assistants like ChatGPT Enterprise and Anthropic Claude to search and retrieve files from your file shares with proper access control.</p><hr><h2 id="table-of-contents" tabindex="-1">Table of Contents <a class="header-anchor" href="#table-of-contents" aria-label="Permalink to &quot;Table of Contents&quot;">â€‹</a></h2><ol><li><a href="#overview">Overview</a></li><li><a href="#architecture">Architecture</a></li><li><a href="#prerequisites">Prerequisites</a></li><li><a href="#configuration">Configuration</a></li><li><a href="#claude-desktop-setup">Claude Desktop Setup</a></li><li><a href="#available-tools">Available Tools</a></li><li><a href="#security--access-control">Security &amp; Access Control</a></li><li><a href="#rate-limiting">Rate Limiting</a></li><li><a href="#troubleshooting">Troubleshooting</a></li><li><a href="#environment-variables-reference">Environment Variables Reference</a></li></ol><hr><h2 id="overview" tabindex="-1">Overview <a class="header-anchor" href="#overview" aria-label="Permalink to &quot;Overview&quot;">â€‹</a></h2><p>The MCP integration allows AI assistants to securely search and retrieve content from your NetApp file shares. Key features include:</p><ul><li><strong>ğŸ” ACL-Based Access Control</strong>: Users can only access files they have permission to view based on SMB ACLs resolved to Microsoft Entra IDs</li><li><strong>ğŸ” Full-Text Search</strong>: Search file content using natural language queries</li><li><strong>ğŸ“„ Content Windowing</strong>: Navigate large documents in chunks that fit AI context windows</li><li><strong>âš¡ Rate Limiting</strong>: Per-user rate limits prevent abuse and ensure fair usage</li><li><strong>ğŸ”’ OAuth 2.0 Authentication</strong>: Secure authentication via Microsoft Entra ID</li></ul><h3 id="how-it-works" tabindex="-1">How It Works <a class="header-anchor" href="#how-it-works" aria-label="Permalink to &quot;How It Works&quot;">â€‹</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span></span>
<span class="line"><span>â”‚                         User asks Claude a question                         â”‚</span></span>
<span class="line"><span>â”‚                    &quot;Find the Q4 financial reports&quot;                          â”‚</span></span>
<span class="line"><span>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span></span>
<span class="line"><span>                                        â”‚</span></span>
<span class="line"><span>                                        â–¼</span></span>
<span class="line"><span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span></span>
<span class="line"><span>â”‚                              Claude Desktop                                 â”‚</span></span>
<span class="line"><span>â”‚                     Uses MCP tools to search files                          â”‚</span></span>
<span class="line"><span>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span></span>
<span class="line"><span>                                        â”‚</span></span>
<span class="line"><span>                                        â”‚ MCP Protocol (HTTP + OAuth)</span></span>
<span class="line"><span>                                        â–¼</span></span>
<span class="line"><span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span></span>
<span class="line"><span>â”‚                         NetApp Connector MCP Server                         â”‚</span></span>
<span class="line"><span>â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚</span></span>
<span class="line"><span>â”‚  â”‚   OAuth     â”‚  â”‚ ACL Filter  â”‚  â”‚ Rate Limiterâ”‚  â”‚ Content Windowing   â”‚ â”‚</span></span>
<span class="line"><span>â”‚  â”‚ Validation  â”‚  â”‚ (per-user)  â”‚  â”‚ (per-user)  â”‚  â”‚ (large documents)   â”‚ â”‚</span></span>
<span class="line"><span>â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚</span></span>
<span class="line"><span>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span></span>
<span class="line"><span>                                        â”‚</span></span>
<span class="line"><span>                                        â”‚ Internal API calls</span></span>
<span class="line"><span>                                        â–¼</span></span>
<span class="line"><span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span></span>
<span class="line"><span>â”‚                         NetApp Connector Database                           â”‚</span></span>
<span class="line"><span>â”‚              (File metadata, content, ACLs, search indexes)                 â”‚</span></span>
<span class="line"><span>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span></span></code></pre></div><hr><h2 id="architecture" tabindex="-1">Architecture <a class="header-anchor" href="#architecture" aria-label="Permalink to &quot;Architecture&quot;">â€‹</a></h2><h3 id="component-diagram" tabindex="-1">Component Diagram <a class="header-anchor" href="#component-diagram" aria-label="Permalink to &quot;Component Diagram&quot;">â€‹</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span></span>
<span class="line"><span>â”‚                              AI AGENT LAYER                                  â”‚</span></span>
<span class="line"><span>â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚</span></span>
<span class="line"><span>â”‚  â”‚ Claude Desktop â”‚  â”‚  Windsurf IDE  â”‚  â”‚  Custom Agent  â”‚                  â”‚</span></span>
<span class="line"><span>â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚</span></span>
<span class="line"><span>â”‚          â”‚                   â”‚                   â”‚                           â”‚</span></span>
<span class="line"><span>â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚</span></span>
<span class="line"><span>â”‚                              â”‚                                               â”‚</span></span>
<span class="line"><span>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span></span>
<span class="line"><span>                               â”‚ MCP Protocol</span></span>
<span class="line"><span>                               â”‚ (HTTP POST /mcp)</span></span>
<span class="line"><span>                               â–¼</span></span>
<span class="line"><span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span></span>
<span class="line"><span>â”‚                           MCP SERVER LAYER                                   â”‚</span></span>
<span class="line"><span>â”‚                                                                              â”‚</span></span>
<span class="line"><span>â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚</span></span>
<span class="line"><span>â”‚  â”‚                    HTTP Transport (FastAPI Router)                      â”‚ â”‚</span></span>
<span class="line"><span>â”‚  â”‚                         POST /mcp endpoint                              â”‚ â”‚</span></span>
<span class="line"><span>â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚</span></span>
<span class="line"><span>â”‚                                    â”‚                                         â”‚</span></span>
<span class="line"><span>â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚</span></span>
<span class="line"><span>â”‚         â–¼                          â–¼                          â–¼              â”‚</span></span>
<span class="line"><span>â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚</span></span>
<span class="line"><span>â”‚  â”‚   OAuth     â”‚           â”‚ ACL Filter  â”‚           â”‚    Rate     â”‚         â”‚</span></span>
<span class="line"><span>â”‚  â”‚ Validation  â”‚           â”‚             â”‚           â”‚   Limiter   â”‚         â”‚</span></span>
<span class="line"><span>â”‚  â”‚             â”‚           â”‚ - User ID   â”‚           â”‚             â”‚         â”‚</span></span>
<span class="line"><span>â”‚  â”‚ - Entra ID  â”‚           â”‚ - Groups    â”‚           â”‚ - Per-tool  â”‚         â”‚</span></span>
<span class="line"><span>â”‚  â”‚ - JWT       â”‚           â”‚ - Share ACL â”‚           â”‚ - Per-user  â”‚         â”‚</span></span>
<span class="line"><span>â”‚  â”‚ - Groups    â”‚           â”‚   Override  â”‚           â”‚ - Bytes     â”‚         â”‚</span></span>
<span class="line"><span>â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚</span></span>
<span class="line"><span>â”‚                                    â”‚                                         â”‚</span></span>
<span class="line"><span>â”‚                                    â–¼                                         â”‚</span></span>
<span class="line"><span>â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚</span></span>
<span class="line"><span>â”‚  â”‚                           MCP TOOLS                                     â”‚ â”‚</span></span>
<span class="line"><span>â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚ â”‚</span></span>
<span class="line"><span>â”‚  â”‚  â”‚ search_files â”‚ â”‚ full_text_   â”‚ â”‚ get_file_    â”‚ â”‚ list_shares  â”‚    â”‚ â”‚</span></span>
<span class="line"><span>â”‚  â”‚  â”‚              â”‚ â”‚ search       â”‚ â”‚ content      â”‚ â”‚              â”‚    â”‚ â”‚</span></span>
<span class="line"><span>â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚ â”‚</span></span>
<span class="line"><span>â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                       â”‚ â”‚</span></span>
<span class="line"><span>â”‚  â”‚  â”‚ search_      â”‚                                                       â”‚ â”‚</span></span>
<span class="line"><span>â”‚  â”‚  â”‚ entities     â”‚                                                       â”‚ â”‚</span></span>
<span class="line"><span>â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                       â”‚ â”‚</span></span>
<span class="line"><span>â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚</span></span>
<span class="line"><span>â”‚                                                                              â”‚</span></span>
<span class="line"><span>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span></span>
<span class="line"><span>                               â”‚</span></span>
<span class="line"><span>                               â”‚ Internal HTTP</span></span>
<span class="line"><span>                               â–¼</span></span>
<span class="line"><span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span></span>
<span class="line"><span>â”‚                        NETAPP CONNECTOR API                                  â”‚</span></span>
<span class="line"><span>â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚</span></span>
<span class="line"><span>â”‚  â”‚ GET /files  â”‚  â”‚ POST /searchâ”‚  â”‚ GET /shares â”‚  â”‚ GET /ner/entities   â”‚  â”‚</span></span>
<span class="line"><span>â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚</span></span>
<span class="line"><span>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span></span></code></pre></div><h3 id="data-flow-for-file-access" tabindex="-1">Data Flow for File Access <a class="header-anchor" href="#data-flow-for-file-access" aria-label="Permalink to &quot;Data Flow for File Access&quot;">â€‹</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span></span>
<span class="line"><span>â”‚                         FILE ACCESS FLOW                                    â”‚</span></span>
<span class="line"><span>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span></span>
<span class="line"><span></span></span>
<span class="line"><span>  User Request                    MCP Server                    Response</span></span>
<span class="line"><span>       â”‚                              â”‚                             â”‚</span></span>
<span class="line"><span>       â”‚  1. &quot;Get quarterly report&quot;   â”‚                             â”‚</span></span>
<span class="line"><span>       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                             â”‚</span></span>
<span class="line"><span>       â”‚                              â”‚                             â”‚</span></span>
<span class="line"><span>       â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚</span></span>
<span class="line"><span>       â”‚                    â”‚ 2. Validate OAuth â”‚                   â”‚</span></span>
<span class="line"><span>       â”‚                    â”‚    Bearer Token   â”‚                   â”‚</span></span>
<span class="line"><span>       â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚</span></span>
<span class="line"><span>       â”‚                              â”‚                             â”‚</span></span>
<span class="line"><span>       â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚</span></span>
<span class="line"><span>       â”‚                    â”‚ 3. Extract User   â”‚                   â”‚</span></span>
<span class="line"><span>       â”‚                    â”‚    Object ID &amp;    â”‚                   â”‚</span></span>
<span class="line"><span>       â”‚                    â”‚    Group Members  â”‚                   â”‚</span></span>
<span class="line"><span>       â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚</span></span>
<span class="line"><span>       â”‚                              â”‚                             â”‚</span></span>
<span class="line"><span>       â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚</span></span>
<span class="line"><span>       â”‚                    â”‚ 4. Search Files   â”‚                   â”‚</span></span>
<span class="line"><span>       â”‚                    â”‚    in Database    â”‚                   â”‚</span></span>
<span class="line"><span>       â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚</span></span>
<span class="line"><span>       â”‚                              â”‚                             â”‚</span></span>
<span class="line"><span>       â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚</span></span>
<span class="line"><span>       â”‚                    â”‚ 5. ACL Filter:    â”‚                   â”‚</span></span>
<span class="line"><span>       â”‚                    â”‚    Check each fileâ”‚                   â”‚</span></span>
<span class="line"><span>       â”‚                    â”‚    resolved_      â”‚                   â”‚</span></span>
<span class="line"><span>       â”‚                    â”‚    principals     â”‚                   â”‚</span></span>
<span class="line"><span>       â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚</span></span>
<span class="line"><span>       â”‚                              â”‚                             â”‚</span></span>
<span class="line"><span>       â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚</span></span>
<span class="line"><span>       â”‚                    â”‚ 6. Return only    â”‚                   â”‚</span></span>
<span class="line"><span>       â”‚                    â”‚    accessible     â”‚                   â”‚</span></span>
<span class="line"><span>       â”‚                    â”‚    files          â”‚                   â”‚</span></span>
<span class="line"><span>       â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚</span></span>
<span class="line"><span>       â”‚                              â”‚                             â”‚</span></span>
<span class="line"><span>       â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                             â”‚</span></span>
<span class="line"><span>       â”‚  7. Filtered results         â”‚                             â”‚</span></span></code></pre></div><hr><h2 id="prerequisites" tabindex="-1">Prerequisites <a class="header-anchor" href="#prerequisites" aria-label="Permalink to &quot;Prerequisites&quot;">â€‹</a></h2><p>Before configuring MCP, ensure you have:</p><ol><li><strong>NetApp Connector Running</strong>: The connector API must be accessible (default: <code>http://localhost:8080</code>)</li><li><strong>Microsoft Entra ID App Registration</strong>: Required for OAuth authentication</li><li><strong>Indexed File Shares</strong>: At least one share must be configured and crawled</li><li><strong>ACL Resolution Enabled</strong>: Files should have <code>resolved_principals</code> for proper access control</li></ol><h3 id="microsoft-entra-id-requirements" tabindex="-1">Microsoft Entra ID Requirements <a class="header-anchor" href="#microsoft-entra-id-requirements" aria-label="Permalink to &quot;Microsoft Entra ID Requirements&quot;">â€‹</a></h3><p>Your Entra ID app registration needs:</p><table tabindex="0"><thead><tr><th>Permission</th><th>Type</th><th>Purpose</th></tr></thead><tbody><tr><td><code>User.Read</code></td><td>Delegated</td><td>Read user profile</td></tr><tr><td><code>openid</code></td><td>Delegated</td><td>OpenID Connect sign-in</td></tr><tr><td><code>profile</code></td><td>Delegated</td><td>Read user&#39;s basic profile</td></tr><tr><td><code>email</code></td><td>Delegated</td><td>Read user&#39;s email address</td></tr></tbody></table><hr><h2 id="configuration" tabindex="-1">Configuration <a class="header-anchor" href="#configuration" aria-label="Permalink to &quot;Configuration&quot;">â€‹</a></h2><h3 id="step-1-configure-environment-variables" tabindex="-1">Step 1: Configure Environment Variables <a class="header-anchor" href="#step-1-configure-environment-variables" aria-label="Permalink to &quot;Step 1: Configure Environment Variables&quot;">â€‹</a></h3><p>Add these to your <code>.env</code> file or container environment:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># OAuth Configuration (Required for MCP)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">MCP_OAUTH_ENABLED</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">MCP_OAUTH_TENANT_ID</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">your-tenant-id</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">          # Microsoft Entra tenant ID</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">MCP_OAUTH_CLIENT_ID</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">your-client-id</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">          # App registration client ID</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">MCP_OAUTH_CLIENT_SECRET</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">your-client-secret</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # App registration secret</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Optional: Rate Limiting Configuration</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">MCP_RATE_LIMIT_SEARCH</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">30</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # search_files requests per minute</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">MCP_RATE_LIMIT_FULL_TEXT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">20</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     # full_text_search requests per minute</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">MCP_RATE_LIMIT_CONTENT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">60</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">       # get_file_content requests per minute</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">MCP_RATE_LIMIT_SHARES</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">10</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # list_shares requests per minute</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">MCP_RATE_LIMIT_ENTITIES</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">20</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      # search_entities requests per minute</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">MCP_RATE_LIMIT_TOTAL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">100</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # Total requests per minute per user</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">MCP_RATE_LIMIT_BYTES</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">10485760</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   # Content bytes per minute (10MB)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Optional: Content Windowing</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">MCP_DEFAULT_WINDOW_SIZE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">50000</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   # Default content window (50KB)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">MCP_MAX_WINDOW_SIZE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">100000</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      # Maximum content window (100KB)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Optional: Default ACL Mode (when no resolved_principals)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">MCP_DEFAULT_ACL_MODE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">deny</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">       # &quot;deny&quot; (secure) or &quot;allow&quot;</span></span></code></pre></div><h3 id="step-2-verify-mcp-endpoint" tabindex="-1">Step 2: Verify MCP Endpoint <a class="header-anchor" href="#step-2-verify-mcp-endpoint" aria-label="Permalink to &quot;Step 2: Verify MCP Endpoint&quot;">â€‹</a></h3><p>Once configured, verify the MCP endpoint is available:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Check OAuth metadata endpoint</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">curl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> http://localhost:8080/.well-known/oauth-protected-resource</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Expected response:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  &quot;resource&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;http://localhost:8080/mcp&quot;,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  &quot;authorization_servers&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;http://localhost:8080&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  &quot;scopes_supported&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;openid&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;profile&quot;,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;email&quot;,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;offline_access&quot;],</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  &quot;bearer_methods_supported&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;header&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><hr><h2 id="claude-desktop-setup" tabindex="-1">Claude Desktop Setup <a class="header-anchor" href="#claude-desktop-setup" aria-label="Permalink to &quot;Claude Desktop Setup&quot;">â€‹</a></h2><h3 id="option-a-http-transport-with-automatic-oauth-recommended" tabindex="-1">Option A: HTTP Transport with Automatic OAuth (Recommended) <a class="header-anchor" href="#option-a-http-transport-with-automatic-oauth-recommended" aria-label="Permalink to &quot;Option A: HTTP Transport with Automatic OAuth (Recommended)&quot;">â€‹</a></h3><p>This method allows Claude Desktop to handle OAuth automatically. Edit your Claude Desktop configuration file:</p><p><strong>Location:</strong></p><ul><li><strong>macOS</strong>: <code>~/Library/Application Support/Claude/claude_desktop_config.json</code></li><li><strong>Windows</strong>: <code>%APPDATA%\\Claude\\claude_desktop_config.json</code></li><li><strong>Linux</strong>: <code>~/.config/claude/claude_desktop_config.json</code></li></ul><p><strong>Configuration:</strong></p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;mcpServers&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;netapp-files&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;url&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;http://localhost:8080/mcp&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;oauth&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;client_id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;your-client-id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;client_secret&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;your-client-secret&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;authorization_url&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;http://localhost:8080/authorize&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;token_url&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;http://localhost:8080/token&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;scopes&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;openid&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;profile&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;email&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><strong>How it works:</strong></p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span></span>
<span class="line"><span>â”‚                    AUTOMATIC OAUTH FLOW                                     â”‚</span></span>
<span class="line"><span>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span></span>
<span class="line"><span></span></span>
<span class="line"><span>  Claude Desktop              NetApp Connector              Microsoft Entra</span></span>
<span class="line"><span>       â”‚                            â”‚                             â”‚</span></span>
<span class="line"><span>       â”‚  1. First MCP request      â”‚                             â”‚</span></span>
<span class="line"><span>       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                             â”‚</span></span>
<span class="line"><span>       â”‚                            â”‚                             â”‚</span></span>
<span class="line"><span>       â”‚  2. 401 + WWW-Authenticate â”‚                             â”‚</span></span>
<span class="line"><span>       â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                             â”‚</span></span>
<span class="line"><span>       â”‚                            â”‚                             â”‚</span></span>
<span class="line"><span>       â”‚  3. Open browser for login â”‚                             â”‚</span></span>
<span class="line"><span>       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚</span></span>
<span class="line"><span>       â”‚                            â”‚                             â”‚</span></span>
<span class="line"><span>       â”‚                            â”‚  4. User signs in           â”‚</span></span>
<span class="line"><span>       â”‚                            â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span></span>
<span class="line"><span>       â”‚                            â”‚                             â”‚</span></span>
<span class="line"><span>       â”‚  5. Receive auth code      â”‚                             â”‚</span></span>
<span class="line"><span>       â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span></span>
<span class="line"><span>       â”‚                            â”‚                             â”‚</span></span>
<span class="line"><span>       â”‚  6. Exchange for token     â”‚                             â”‚</span></span>
<span class="line"><span>       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                             â”‚</span></span>
<span class="line"><span>       â”‚                            â”‚                             â”‚</span></span>
<span class="line"><span>       â”‚  7. Access token           â”‚                             â”‚</span></span>
<span class="line"><span>       â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                             â”‚</span></span>
<span class="line"><span>       â”‚                            â”‚                             â”‚</span></span>
<span class="line"><span>       â”‚  8. MCP request + Bearer   â”‚                             â”‚</span></span>
<span class="line"><span>       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                             â”‚</span></span>
<span class="line"><span>       â”‚                            â”‚                             â”‚</span></span>
<span class="line"><span>       â”‚  9. Results (ACL filtered) â”‚                             â”‚</span></span>
<span class="line"><span>       â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                             â”‚</span></span></code></pre></div><h3 id="option-b-stdio-transport-with-manual-token" tabindex="-1">Option B: stdio Transport with Manual Token <a class="header-anchor" href="#option-b-stdio-transport-with-manual-token" aria-label="Permalink to &quot;Option B: stdio Transport with Manual Token&quot;">â€‹</a></h3><p>For development or when HTTP transport isn&#39;t available:</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;mcpServers&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;netapp-files&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;command&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;python&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;args&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;-m&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;app.mcp&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;cwd&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/path/to/netapp-copilot-connector-gen-2&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;env&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;NETAPP_API_URL&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;http://localhost:8080&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;MCP_OAUTH_ENABLED&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;true&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;MCP_OAUTH_TENANT_ID&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;your-tenant-id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;MCP_OAUTH_CLIENT_ID&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;your-client-id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;MCP_OAUTH_CLIENT_SECRET&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;your-client-secret&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;MCP_OAUTH_TOKEN&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;your-user-oauth-token&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><strong>Note:</strong> With Option B, you must manually obtain and update the OAuth token.</p><h3 id="getting-a-manual-oauth-token" tabindex="-1">Getting a Manual OAuth Token <a class="header-anchor" href="#getting-a-manual-oauth-token" aria-label="Permalink to &quot;Getting a Manual OAuth Token&quot;">â€‹</a></h3><p>If using stdio transport, obtain a token using one of these methods:</p><h4 id="method-1-browser-login" tabindex="-1">Method 1: Browser Login <a class="header-anchor" href="#method-1-browser-login" aria-label="Permalink to &quot;Method 1: Browser Login&quot;">â€‹</a></h4><ol><li>Visit <code>http://localhost:8080/auth/login</code></li><li>Sign in with your Microsoft account</li><li>Copy the access token from the success page</li></ol><h4 id="method-2-device-code-flow" tabindex="-1">Method 2: Device Code Flow <a class="header-anchor" href="#method-2-device-code-flow" aria-label="Permalink to &quot;Method 2: Device Code Flow&quot;">â€‹</a></h4><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 1. Initiate device code flow</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">curl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -X</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> POST</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;http://localhost:8080/auth/device&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Response:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#   &quot;user_code&quot;: &quot;ABCD1234&quot;,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#   &quot;verification_uri&quot;: &quot;https://microsoft.com/devicelogin&quot;,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#   &quot;device_code&quot;: &quot;...&quot;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 2. Visit the URL and enter the code</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 3. Poll for the token</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">curl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -X</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> POST</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;http://localhost:8080/auth/device/poll?device_code=YOUR_DEVICE_CODE&quot;</span></span></code></pre></div><h4 id="method-3-azure-cli" tabindex="-1">Method 3: Azure CLI <a class="header-anchor" href="#method-3-azure-cli" aria-label="Permalink to &quot;Method 3: Azure CLI&quot;">â€‹</a></h4><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">az</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> login</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">az</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> account</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> get-access-token</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --resource</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> api://your-client-id</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --query</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> accessToken</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -o</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> tsv</span></span></code></pre></div><hr><h2 id="available-tools" tabindex="-1">Available Tools <a class="header-anchor" href="#available-tools" aria-label="Permalink to &quot;Available Tools&quot;">â€‹</a></h2><p>The MCP server exposes five tools for AI agents:</p><h3 id="_1-search-files" tabindex="-1">1. <code>search_files</code> <a class="header-anchor" href="#_1-search-files" aria-label="Permalink to &quot;1\\. \`search_files\`&quot;">â€‹</a></h3><p>Search for files by name, type, date, or size across all accessible shares.</p><p><strong>Parameters:</strong></p><table tabindex="0"><thead><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>query</code></td><td>string</td><td>Text to search in filename (case-insensitive)</td></tr><tr><td><code>file_type</code></td><td>string</td><td>Filter by extension: <code>pdf</code>, <code>docx</code>, <code>xlsx</code>, etc.</td></tr><tr><td><code>path</code></td><td>string</td><td>Filter by path pattern (e.g., <code>/reports/</code>)</td></tr><tr><td><code>modified_after</code></td><td>string</td><td>ISO datetime - files modified after this date</td></tr><tr><td><code>modified_before</code></td><td>string</td><td>ISO datetime - files modified before this date</td></tr><tr><td><code>size_min</code></td><td>integer</td><td>Minimum file size in bytes</td></tr><tr><td><code>size_max</code></td><td>integer</td><td>Maximum file size in bytes</td></tr><tr><td><code>limit</code></td><td>integer</td><td>Max results (default: 20, max: 100)</td></tr></tbody></table><p><strong>Example Usage:</strong></p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>&quot;Find all PDF files modified in the last month&quot;</span></span>
<span class="line"><span>â†’ search_files(file_type=&quot;pdf&quot;, modified_after=&quot;2024-11-01&quot;)</span></span></code></pre></div><h3 id="_2-full-text-search" tabindex="-1">2. <code>full_text_search</code> <a class="header-anchor" href="#_2-full-text-search" aria-label="Permalink to &quot;2\\. \`full_text_search\`&quot;">â€‹</a></h3><p>Search file content using natural language queries with boolean operators.</p><p><strong>Parameters:</strong></p><table tabindex="0"><thead><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>query</code></td><td>string</td><td><strong>Required.</strong> Search query with optional operators</td></tr><tr><td><code>file_types</code></td><td>array</td><td>Filter by file types: <code>[&quot;pdf&quot;, &quot;docx&quot;]</code></td></tr><tr><td><code>limit</code></td><td>integer</td><td>Max results (default: 20, max: 100)</td></tr></tbody></table><p><strong>Query Syntax:</strong></p><ul><li>Simple: <code>quarterly report</code></li><li>AND: <code>budget AND 2024</code></li><li>OR: <code>invoice OR receipt</code></li><li>Phrase: <code>&quot;project alpha&quot;</code></li><li>Exclude: <code>report -draft</code></li></ul><p><strong>Example Usage:</strong></p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>&quot;Search for documents mentioning Project Alpha&quot;</span></span>
<span class="line"><span>â†’ full_text_search(query=&quot;\\&quot;Project Alpha\\&quot;&quot;)</span></span></code></pre></div><h3 id="_3-get-file-content" tabindex="-1">3. <code>get_file_content</code> <a class="header-anchor" href="#_3-get-file-content" aria-label="Permalink to &quot;3\\. \`get_file_content\`&quot;">â€‹</a></h3><p>Retrieve extracted text content from a file with windowing for large documents.</p><p><strong>Parameters:</strong></p><table tabindex="0"><thead><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>file_id</code></td><td>string</td><td><strong>Required.</strong> File ID from search results</td></tr><tr><td><code>share_id</code></td><td>string</td><td>Share ID (optional, improves performance)</td></tr><tr><td><code>window_start</code></td><td>integer</td><td>Character offset to start from (default: 0)</td></tr><tr><td><code>window_size</code></td><td>integer</td><td>Characters to return (default: 50000, max: 100000)</td></tr><tr><td><code>include_metadata</code></td><td>boolean</td><td>Include file metadata (default: true)</td></tr></tbody></table><p><strong>Response includes navigation hints:</strong></p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;file_id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;abc123&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;filename&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;annual_report.pdf&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;content&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;... extracted text ...&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;window&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;start&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;size&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">50000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;total_length&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">250000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;has_more&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;next_start&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">50000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;progress_percent&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">20</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><strong>Scrolling through large documents:</strong></p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span></span>
<span class="line"><span>â”‚                    CONTENT WINDOWING                                        â”‚</span></span>
<span class="line"><span>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span></span>
<span class="line"><span></span></span>
<span class="line"><span>  Document (250KB total)</span></span>
<span class="line"><span>  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span></span>
<span class="line"><span>  â”‚                                                                         â”‚</span></span>
<span class="line"><span>  â”‚  Window 1: 0-50KB        Window 2: 50-100KB      Window 3: 100-150KB    â”‚</span></span>
<span class="line"><span>  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚</span></span>
<span class="line"><span>  â”‚  â”‚ Introduction â”‚   â†’    â”‚ Chapter 1    â”‚   â†’    â”‚ Chapter 2    â”‚  ...  â”‚</span></span>
<span class="line"><span>  â”‚  â”‚ Executive    â”‚        â”‚ Analysis     â”‚        â”‚ Results      â”‚       â”‚</span></span>
<span class="line"><span>  â”‚  â”‚ Summary      â”‚        â”‚              â”‚        â”‚              â”‚       â”‚</span></span>
<span class="line"><span>  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚</span></span>
<span class="line"><span>  â”‚                                                                         â”‚</span></span>
<span class="line"><span>  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span></span>
<span class="line"><span></span></span>
<span class="line"><span>  Request 1: get_file_content(file_id=&quot;abc&quot;, window_start=0)</span></span>
<span class="line"><span>  Request 2: get_file_content(file_id=&quot;abc&quot;, window_start=50000)</span></span>
<span class="line"><span>  Request 3: get_file_content(file_id=&quot;abc&quot;, window_start=100000)</span></span></code></pre></div><h3 id="_4-list-shares" tabindex="-1">4. <code>list_shares</code> <a class="header-anchor" href="#_4-list-shares" aria-label="Permalink to &quot;4\\. \`list_shares\`&quot;">â€‹</a></h3><p>List available file shares in the system.</p><p><strong>Parameters:</strong> None</p><p><strong>Response:</strong></p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;shares&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;share-uuid&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Finance&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;path&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\\\\\\\</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">server</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\\\</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">finance&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;status&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;READY&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;file_count&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1250</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="_5-search-entities" tabindex="-1">5. <code>search_entities</code> <a class="header-anchor" href="#_5-search-entities" aria-label="Permalink to &quot;5\\. \`search_entities\`&quot;">â€‹</a></h3><p>Find files containing specific named entities (people, organizations, etc.) extracted via NER.</p><p><strong>Parameters:</strong></p><table tabindex="0"><thead><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>entity_value</code></td><td>string</td><td><strong>Required.</strong> Entity to search for</td></tr><tr><td><code>entity_type</code></td><td>string</td><td>Type filter: <code>person</code>, <code>organization</code>, <code>location</code>, <code>date</code>, <code>money</code>, <code>email</code>, <code>phone</code></td></tr><tr><td><code>limit</code></td><td>integer</td><td>Max results (default: 20, max: 100)</td></tr></tbody></table><p><strong>Example Usage:</strong></p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>&quot;Find documents mentioning Acme Corporation&quot;</span></span>
<span class="line"><span>â†’ search_entities(entity_value=&quot;Acme Corporation&quot;, entity_type=&quot;organization&quot;)</span></span></code></pre></div><hr><h2 id="security-access-control" tabindex="-1">Security &amp; Access Control <a class="header-anchor" href="#security-access-control" aria-label="Permalink to &quot;Security &amp; Access Control&quot;">â€‹</a></h2><h3 id="acl-filtering-flow" tabindex="-1">ACL Filtering Flow <a class="header-anchor" href="#acl-filtering-flow" aria-label="Permalink to &quot;ACL Filtering Flow&quot;">â€‹</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span></span>
<span class="line"><span>â”‚                         ACL ACCESS DECISION FLOW                            â”‚</span></span>
<span class="line"><span>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span></span>
<span class="line"><span></span></span>
<span class="line"><span>                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span></span>
<span class="line"><span>                              â”‚  File Request   â”‚</span></span>
<span class="line"><span>                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span></span>
<span class="line"><span>                                       â”‚</span></span>
<span class="line"><span>                                       â–¼</span></span>
<span class="line"><span>                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span></span>
<span class="line"><span>                         â”‚ File has resolved_      â”‚</span></span>
<span class="line"><span>                         â”‚ principals?             â”‚</span></span>
<span class="line"><span>                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span></span>
<span class="line"><span>                                      â”‚</span></span>
<span class="line"><span>                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span></span>
<span class="line"><span>                    â”‚ YES                               â”‚ NO</span></span>
<span class="line"><span>                    â–¼                                   â–¼</span></span>
<span class="line"><span>         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span></span>
<span class="line"><span>         â”‚ User Object ID in   â”‚           â”‚ Share has           â”‚</span></span>
<span class="line"><span>         â”‚ resolved_principals?â”‚           â”‚ acl_override_mode?  â”‚</span></span>
<span class="line"><span>         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span></span>
<span class="line"><span>                    â”‚                                  â”‚</span></span>
<span class="line"><span>         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span></span>
<span class="line"><span>         â”‚ YES          â”‚ NO   â”‚           â”‚ YES          â”‚ NO   â”‚</span></span>
<span class="line"><span>         â–¼              â–¼      â”‚           â–¼              â–¼</span></span>
<span class="line"><span>    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”</span></span>
<span class="line"><span>    â”‚ ALLOW  â”‚   â”‚ User in   â”‚ â”‚    â”‚ Check     â”‚   â”‚ DENY   â”‚</span></span>
<span class="line"><span>    â”‚        â”‚   â”‚ group in  â”‚ â”‚    â”‚ override  â”‚   â”‚        â”‚</span></span>
<span class="line"><span>    â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ resolved_ â”‚ â”‚    â”‚ rules     â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span></span>
<span class="line"><span>                 â”‚ principalsâ”‚ â”‚    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜</span></span>
<span class="line"><span>                 â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â”‚          â”‚</span></span>
<span class="line"><span>                       â”‚       â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”</span></span>
<span class="line"><span>              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”   â”‚             â”‚</span></span>
<span class="line"><span>              â”‚ YES      â”‚ NO  â”‚   â–¼             â–¼</span></span>
<span class="line"><span>              â–¼          â–¼     â”‚  &quot;everyone&quot;   &quot;specified&quot;</span></span>
<span class="line"><span>         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span></span>
<span class="line"><span>         â”‚ ALLOW  â”‚  â”‚ DENY   â”‚â”‚  â”‚ ALLOW  â”‚   â”‚ User in   â”‚</span></span>
<span class="line"><span>         â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ specified â”‚</span></span>
<span class="line"><span>                               â”‚               â”‚ principalsâ”‚</span></span>
<span class="line"><span>                               â”‚               â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜</span></span>
<span class="line"><span>                               â”‚                     â”‚</span></span>
<span class="line"><span>                               â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”</span></span>
<span class="line"><span>                               â”‚              â”‚ YES    â”‚ NO â”‚</span></span>
<span class="line"><span>                               â”‚              â–¼        â–¼</span></span>
<span class="line"><span>                               â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”</span></span>
<span class="line"><span>                               â”‚         â”‚ ALLOW  â”‚ â”‚ DENY   â”‚</span></span>
<span class="line"><span>                               â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span></span></code></pre></div><h3 id="share-level-acl-override" tabindex="-1">Share-Level ACL Override <a class="header-anchor" href="#share-level-acl-override" aria-label="Permalink to &quot;Share-Level ACL Override&quot;">â€‹</a></h3><p>When files don&#39;t have resolved ACL principals, you can configure share-level fallback:</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;rules&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;acl_override_mode&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;everyone&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><strong>Options:</strong></p><ul><li><code>&quot;everyone&quot;</code> - All authenticated users can access files without resolved ACLs</li><li><code>&quot;specified&quot;</code> - Only specified users/groups can access:</li></ul><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;rules&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;acl_override_mode&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;specified&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;acl_override_principals&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;group&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;group-object-id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;user&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;user-object-id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="security-best-practices" tabindex="-1">Security Best Practices <a class="header-anchor" href="#security-best-practices" aria-label="Permalink to &quot;Security Best Practices&quot;">â€‹</a></h3><ol><li><strong>Keep <code>MCP_DEFAULT_ACL_MODE=deny</code></strong> - This ensures files without resolved ACLs are not accessible</li><li><strong>Use HTTPS in production</strong> - Configure SSL/TLS for the connector API</li><li><strong>Rotate client secrets regularly</strong> - Update your Entra ID app registration secrets</li><li><strong>Monitor MCP operations</strong> - All MCP tool calls are logged to the operations log</li><li><strong>Configure appropriate rate limits</strong> - Prevent abuse with per-user limits</li></ol><hr><h2 id="rate-limiting" tabindex="-1">Rate Limiting <a class="header-anchor" href="#rate-limiting" aria-label="Permalink to &quot;Rate Limiting&quot;">â€‹</a></h2><p>Rate limits protect the system from abuse and ensure fair usage across users.</p><h3 id="default-limits-per-minute-per-user" tabindex="-1">Default Limits (per minute per user) <a class="header-anchor" href="#default-limits-per-minute-per-user" aria-label="Permalink to &quot;Default Limits (per minute per user)&quot;">â€‹</a></h3><table tabindex="0"><thead><tr><th>Limit Type</th><th>Default</th><th>Environment Variable</th></tr></thead><tbody><tr><td><code>search_files</code></td><td>30</td><td><code>MCP_RATE_LIMIT_SEARCH</code></td></tr><tr><td><code>full_text_search</code></td><td>20</td><td><code>MCP_RATE_LIMIT_FULL_TEXT</code></td></tr><tr><td><code>get_file_content</code></td><td>60</td><td><code>MCP_RATE_LIMIT_CONTENT</code></td></tr><tr><td><code>list_shares</code></td><td>10</td><td><code>MCP_RATE_LIMIT_SHARES</code></td></tr><tr><td><code>search_entities</code></td><td>20</td><td><code>MCP_RATE_LIMIT_ENTITIES</code></td></tr><tr><td>Total requests</td><td>100</td><td><code>MCP_RATE_LIMIT_TOTAL</code></td></tr><tr><td>Content bytes</td><td>10MB</td><td><code>MCP_RATE_LIMIT_BYTES</code></td></tr></tbody></table><h3 id="rate-limit-response" tabindex="-1">Rate Limit Response <a class="header-anchor" href="#rate-limit-response" aria-label="Permalink to &quot;Rate Limit Response&quot;">â€‹</a></h3><p>When rate limited, tools return:</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;error&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;rate_limited&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;message&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Rate limit exceeded for search_files&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;retry_after&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">45</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;rate_limit&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;allowed&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;remaining&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;limit&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">30</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;reset_at&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1702732800.0</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><hr><h2 id="troubleshooting" tabindex="-1">Troubleshooting <a class="header-anchor" href="#troubleshooting" aria-label="Permalink to &quot;Troubleshooting&quot;">â€‹</a></h2><h3 id="common-issues" tabindex="-1">Common Issues <a class="header-anchor" href="#common-issues" aria-label="Permalink to &quot;Common Issues&quot;">â€‹</a></h3><h4 id="_1-oauth-provider-not-configured" tabindex="-1">1. &quot;OAuth provider not configured&quot; <a class="header-anchor" href="#_1-oauth-provider-not-configured" aria-label="Permalink to &quot;1\\. &quot;OAuth provider not configured&quot;&quot;">â€‹</a></h4><p><strong>Cause:</strong> Missing OAuth environment variables</p><p><strong>Solution:</strong> Ensure these are set:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">MCP_OAUTH_ENABLED</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">MCP_OAUTH_TENANT_ID</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">your-tenant-id</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">MCP_OAUTH_CLIENT_ID</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">your-client-id</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">MCP_OAUTH_CLIENT_SECRET</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">your-client-secret</span></span></code></pre></div><h4 id="_2-token-validation-failed" tabindex="-1">2. &quot;Token validation failed&quot; <a class="header-anchor" href="#_2-token-validation-failed" aria-label="Permalink to &quot;2\\. &quot;Token validation failed&quot;&quot;">â€‹</a></h4><p><strong>Cause:</strong> Invalid or expired OAuth token</p><p><strong>Solutions:</strong></p><ul><li>Refresh your OAuth token</li><li>Check that the token audience matches your app registration</li><li>Verify the token hasn&#39;t expired</li></ul><h4 id="_3-access-denied-for-files-you-should-have-access-to" tabindex="-1">3. &quot;Access denied&quot; for files you should have access to <a class="header-anchor" href="#_3-access-denied-for-files-you-should-have-access-to" aria-label="Permalink to &quot;3\\. &quot;Access denied&quot; for files you should have access to&quot;">â€‹</a></h4><p><strong>Cause:</strong> ACL resolution issues</p><p><strong>Solutions:</strong></p><ul><li>Verify the file has <code>resolved_principals</code> in the database</li><li>Check that your Entra Object ID matches a principal</li><li>Verify your group memberships are being fetched correctly</li><li>Consider configuring <code>acl_override_mode</code> on the share</li></ul><h4 id="_4-rate-limit-exceeded" tabindex="-1">4. &quot;Rate limit exceeded&quot; <a class="header-anchor" href="#_4-rate-limit-exceeded" aria-label="Permalink to &quot;4\\. &quot;Rate limit exceeded&quot;&quot;">â€‹</a></h4><p><strong>Cause:</strong> Too many requests in a short period</p><p><strong>Solutions:</strong></p><ul><li>Wait for the <code>retry_after</code> period</li><li>Reduce request frequency</li><li>Increase rate limits via environment variables</li></ul><h4 id="_5-files-not-appearing-in-search-results" tabindex="-1">5. Files not appearing in search results <a class="header-anchor" href="#_5-files-not-appearing-in-search-results" aria-label="Permalink to &quot;5\\. Files not appearing in search results&quot;">â€‹</a></h4><p><strong>Causes:</strong></p><ul><li>Files haven&#39;t been crawled yet</li><li>Files don&#39;t match your ACL permissions</li><li>Search filters are too restrictive</li></ul><p><strong>Solutions:</strong></p><ul><li>Verify the share has been crawled (check share status)</li><li>Check file ACLs and your permissions</li><li>Broaden search parameters</li></ul><h3 id="viewing-mcp-logs" tabindex="-1">Viewing MCP Logs <a class="header-anchor" href="#viewing-mcp-logs" aria-label="Permalink to &quot;Viewing MCP Logs&quot;">â€‹</a></h3><p>MCP operations are logged to the connector&#39;s operations log:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># View recent MCP operations</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">curl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -H</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Authorization: Bearer </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$TOKEN</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &quot;http://localhost:8080/operations?operation_type=MCP_SEARCH_FILES&amp;limit=10&quot;</span></span></code></pre></div><p>Log entries include:</p><ul><li>Tool name and arguments</li><li>User identity (Object ID, email)</li><li>Operation status (SUCCESS/ERROR)</li><li>Result counts</li></ul><hr><h2 id="environment-variables-reference" tabindex="-1">Environment Variables Reference <a class="header-anchor" href="#environment-variables-reference" aria-label="Permalink to &quot;Environment Variables Reference&quot;">â€‹</a></h2><h3 id="oauth-configuration" tabindex="-1">OAuth Configuration <a class="header-anchor" href="#oauth-configuration" aria-label="Permalink to &quot;OAuth Configuration&quot;">â€‹</a></h3><table tabindex="0"><thead><tr><th>Variable</th><th>Required</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td><code>MCP_OAUTH_ENABLED</code></td><td>Yes</td><td><code>false</code></td><td>Enable OAuth authentication</td></tr><tr><td><code>MCP_OAUTH_TENANT_ID</code></td><td>Yes</td><td>-</td><td>Microsoft Entra tenant ID</td></tr><tr><td><code>MCP_OAUTH_CLIENT_ID</code></td><td>Yes</td><td>-</td><td>App registration client ID</td></tr><tr><td><code>MCP_OAUTH_CLIENT_SECRET</code></td><td>Yes</td><td>-</td><td>App registration client secret</td></tr><tr><td><code>MCP_OAUTH_TOKEN</code></td><td>No</td><td>-</td><td>Pre-configured OAuth token (stdio mode)</td></tr></tbody></table><h3 id="rate-limiting-1" tabindex="-1">Rate Limiting <a class="header-anchor" href="#rate-limiting-1" aria-label="Permalink to &quot;Rate Limiting&quot;">â€‹</a></h3><table tabindex="0"><thead><tr><th>Variable</th><th>Required</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td><code>MCP_RATE_LIMIT_SEARCH</code></td><td>No</td><td><code>30</code></td><td>search_files requests/min</td></tr><tr><td><code>MCP_RATE_LIMIT_FULL_TEXT</code></td><td>No</td><td><code>20</code></td><td>full_text_search requests/min</td></tr><tr><td><code>MCP_RATE_LIMIT_CONTENT</code></td><td>No</td><td><code>60</code></td><td>get_file_content requests/min</td></tr><tr><td><code>MCP_RATE_LIMIT_SHARES</code></td><td>No</td><td><code>10</code></td><td>list_shares requests/min</td></tr><tr><td><code>MCP_RATE_LIMIT_ENTITIES</code></td><td>No</td><td><code>20</code></td><td>search_entities requests/min</td></tr><tr><td><code>MCP_RATE_LIMIT_TOTAL</code></td><td>No</td><td><code>100</code></td><td>Total requests/min per user</td></tr><tr><td><code>MCP_RATE_LIMIT_BYTES</code></td><td>No</td><td><code>10485760</code></td><td>Content bytes/min (10MB)</td></tr></tbody></table><h3 id="content-windowing" tabindex="-1">Content Windowing <a class="header-anchor" href="#content-windowing" aria-label="Permalink to &quot;Content Windowing&quot;">â€‹</a></h3><table tabindex="0"><thead><tr><th>Variable</th><th>Required</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td><code>MCP_DEFAULT_WINDOW_SIZE</code></td><td>No</td><td><code>50000</code></td><td>Default window size (chars)</td></tr><tr><td><code>MCP_MAX_WINDOW_SIZE</code></td><td>No</td><td><code>100000</code></td><td>Maximum window size (chars)</td></tr></tbody></table><h3 id="access-control" tabindex="-1">Access Control <a class="header-anchor" href="#access-control" aria-label="Permalink to &quot;Access Control&quot;">â€‹</a></h3><table tabindex="0"><thead><tr><th>Variable</th><th>Required</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td><code>MCP_DEFAULT_ACL_MODE</code></td><td>No</td><td><code>deny</code></td><td>Default ACL mode when no resolved_principals</td></tr></tbody></table><h3 id="server-configuration" tabindex="-1">Server Configuration <a class="header-anchor" href="#server-configuration" aria-label="Permalink to &quot;Server Configuration&quot;">â€‹</a></h3><table tabindex="0"><thead><tr><th>Variable</th><th>Required</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td><code>NETAPP_API_URL</code></td><td>No</td><td><code>http://localhost:8080</code></td><td>NetApp Connector API URL</td></tr><tr><td><code>MCP_LOG_LEVEL</code></td><td>No</td><td><code>INFO</code></td><td>Logging level</td></tr></tbody></table><hr><h2 id="additional-resources" tabindex="-1">Additional Resources <a class="header-anchor" href="#additional-resources" aria-label="Permalink to &quot;Additional Resources&quot;">â€‹</a></h2><ul><li><a href="https://modelcontextprotocol.io/" target="_blank" rel="noreferrer">MCP Protocol Specification</a></li><li><a href="https://learn.microsoft.com/en-us/entra/identity/" target="_blank" rel="noreferrer">Microsoft Entra ID Documentation</a></li><li><a href="https://platform.openai.com/docs/guides/developer-mode" target="_blank" rel="noreferrer">ChatGPT Enterprise Developer Mode Guide</a></li><li><a href="https://docs.anthropic.com/claude/docs/mcp" target="_blank" rel="noreferrer">Claude Desktop MCP Guide</a></li><li><a href="/Innovation-Labs/docs.html">NetApp Connector API Documentation</a></li></ul><hr><p><em>Last updated: January 2026</em></p>`,156)])])}const u=a(e,[["render",l]]);export{k as __pageData,u as default};
