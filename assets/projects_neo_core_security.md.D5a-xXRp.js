import{_ as a,c as s,o as t,ag as e}from"./chunks/framework.By5zrZ8k.js";const u=JSON.parse('{"title":"NetApp Copilot Connector - Security Documentation","description":"","frontmatter":{},"headers":[],"relativePath":"projects/neo/core/security.md","filePath":"projects/neo/core/security.md","lastUpdated":1767691233000}'),n={name:"projects/neo/core/security.md"};function r(o,i,l,h,c,p){return t(),s("div",null,[...i[0]||(i[0]=[e(`<h1 id="netapp-copilot-connector-security-documentation" tabindex="-1">NetApp Copilot Connector - Security Documentation <a class="header-anchor" href="#netapp-copilot-connector-security-documentation" aria-label="Permalink to &quot;NetApp Copilot Connector - Security Documentation&quot;">​</a></h1><h2 id="overview" tabindex="-1">Overview <a class="header-anchor" href="#overview" aria-label="Permalink to &quot;Overview&quot;">​</a></h2><p>The NetApp Copilot Connector is a secure enterprise application that enables Microsoft 365 Copilot to access and index content from NetApp file shares. This document provides comprehensive security information for security teams evaluating the connector&#39;s architecture, implementation, and security controls.</p><h2 id="application-architecture" tabindex="-1">Application Architecture <a class="header-anchor" href="#application-architecture" aria-label="Permalink to &quot;Application Architecture&quot;">​</a></h2><h3 id="high-level-architecture" tabindex="-1">High-Level Architecture <a class="header-anchor" href="#high-level-architecture" aria-label="Permalink to &quot;High-Level Architecture&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>┌─────────────────┐    ┌──────────────────┐</span></span>
<span class="line"><span>│   Microsoft     │    │   Microsoft      │</span></span>
<span class="line"><span>│   365 Copilot   │◄──►│   Graph API      │</span></span>
<span class="line"><span>│                 │    │                  │</span></span>
<span class="line"><span>└─────────────────┘    └──────────────────┘</span></span>
<span class="line"><span>                              ▲</span></span>
<span class="line"><span>                              │</span></span>
<span class="line"><span>                              ▼</span></span>
<span class="line"><span>                       ┌──────────────────┐    ┌─────────────────┐</span></span>
<span class="line"><span>                       │    NetApp        │    │  NetApp File    │</span></span>
<span class="line"><span>                       │   Connector      │◄──►│  Shares (SMB)   │</span></span>
<span class="line"><span>                       │                  │    │                 │</span></span>
<span class="line"><span>                       └──────────────────┘    └─────────────────┘</span></span></code></pre></div><h3 id="core-components" tabindex="-1">Core Components <a class="header-anchor" href="#core-components" aria-label="Permalink to &quot;Core Components&quot;">​</a></h3><ol><li><strong>FastAPI Web Application</strong>: RESTful API server handling authentication, share management, and file operations</li><li><strong>Share Crawler</strong>: Background service that discovers and indexes files from SMB shares</li><li><strong>Microsoft Graph Connector</strong>: Uploads indexed content to Microsoft Graph for Copilot integration</li><li><strong>Database Layer</strong>: SQL-based storage for metadata, user accounts, and operational logs</li><li><strong>Security Manager</strong>: Centralized security services for authentication, encryption, and access control</li></ol><h3 id="firewall-rules" tabindex="-1">Firewall Rules <a class="header-anchor" href="#firewall-rules" aria-label="Permalink to &quot;Firewall Rules&quot;">​</a></h3><p>If your organization&#39;s proxy or firewalls block communication to unknown domains, add the following rules to the &#39;allow&#39; list:</p><table tabindex="0"><thead><tr><th>M365 Enterprise</th><th>M365 Government (GCC)</th><th>M365 GCCH</th></tr></thead><tbody><tr><td>*.office.com</td><td>*.office.com</td><td>*.office.com, *.office365.us</td></tr><tr><td><a href="https://login.microsoftonline.com" target="_blank" rel="noreferrer">https://login.microsoftonline.com</a></td><td><a href="https://login.microsoftonline.com" target="_blank" rel="noreferrer">https://login.microsoftonline.com</a></td><td><a href="https://login.microsoftonline.com" target="_blank" rel="noreferrer">https://login.microsoftonline.com</a>, <a href="https://login.microsoftonline.us" target="_blank" rel="noreferrer">https://login.microsoftonline.us</a></td></tr><tr><td><a href="https://graph.microsoft.com/" target="_blank" rel="noreferrer">https://graph.microsoft.com/</a></td><td><a href="https://graph.microsoft.com/" target="_blank" rel="noreferrer">https://graph.microsoft.com/</a></td><td><a href="https://graph.microsoft.com/" target="_blank" rel="noreferrer">https://graph.microsoft.com/</a>, <a href="https://graph.microsoft.us/" target="_blank" rel="noreferrer">https://graph.microsoft.us/</a></td></tr><tr><td><a href="https://huggingface.co/ds4sd/docling-models/" target="_blank" rel="noreferrer">https://huggingface.co/ds4sd/docling-models/</a></td><td><a href="https://huggingface.co/ds4sd/docling-models" target="_blank" rel="noreferrer">https://huggingface.co/ds4sd/docling-models</a></td><td><a href="https://huggingface.co/ds4sd/docling-models" target="_blank" rel="noreferrer">https://huggingface.co/ds4sd/docling-models</a></td></tr></tbody></table><h2 id="security-architecture" tabindex="-1">Security Architecture <a class="header-anchor" href="#security-architecture" aria-label="Permalink to &quot;Security Architecture&quot;">​</a></h2><h3 id="authentication-authorization" tabindex="-1">Authentication &amp; Authorization <a class="header-anchor" href="#authentication-authorization" aria-label="Permalink to &quot;Authentication &amp; Authorization&quot;">​</a></h3><h4 id="jwt-based-authentication" tabindex="-1">JWT-Based Authentication <a class="header-anchor" href="#jwt-based-authentication" aria-label="Permalink to &quot;JWT-Based Authentication&quot;">​</a></h4><ul><li><strong>Algorithm</strong>: HS256 (HMAC with SHA-256)</li><li><strong>Token Expiration</strong>: Configurable (default: 24 hours)</li><li><strong>Secret Key Management</strong>: <ul><li>Auto-generated 256-bit secret key stored in <code>data/jwt_secret.key</code></li><li>Persistent across application restarts</li><li>Fallback mechanism for file system issues</li></ul></li></ul><h4 id="user-management" tabindex="-1">User Management <a class="header-anchor" href="#user-management" aria-label="Permalink to &quot;User Management&quot;">​</a></h4><ul><li><strong>Password Hashing</strong>: bcrypt with 12 rounds (configurable)</li><li><strong>User Roles</strong>: Standard users and administrators</li><li><strong>Account Management</strong>: Create, authenticate, and manage user accounts</li><li><strong>Session Management</strong>: JWT tokens with configurable expiration</li></ul><h4 id="api-security" tabindex="-1">API Security <a class="header-anchor" href="#api-security" aria-label="Permalink to &quot;API Security&quot;">​</a></h4><ul><li><strong>OAuth2 Bearer Token</strong>: Standard OAuth2 implementation</li><li><strong>Protected Endpoints</strong>: All administrative and data access endpoints require authentication</li><li><strong>Role-Based Access</strong>: Admin-only endpoints for user management and system configuration</li></ul><h3 id="data-encryption" tabindex="-1">Data Encryption <a class="header-anchor" href="#data-encryption" aria-label="Permalink to &quot;Data Encryption&quot;">​</a></h3><h4 id="at-rest-encryption" tabindex="-1">At-Rest Encryption <a class="header-anchor" href="#at-rest-encryption" aria-label="Permalink to &quot;At-Rest Encryption&quot;">​</a></h4><ul><li><strong>Database</strong>: Database files stored with filesystem-level encryption support</li><li><strong>Credential Storage</strong>: SMB passwords encrypted using Fernet (AES 128 in CBC mode)</li><li><strong>Key Management</strong>: <ul><li>Fernet encryption keys auto-generated and stored in <code>data/key.key</code></li><li>Keys are 256-bit URL-safe base64-encoded</li><li>Secure key generation using <code>cryptography</code> library</li></ul></li></ul><h4 id="in-transit-encryption" tabindex="-1">In-Transit Encryption <a class="header-anchor" href="#in-transit-encryption" aria-label="Permalink to &quot;In-Transit Encryption&quot;">​</a></h4><ul><li><strong>HTTPS</strong>: Application designed to run behind HTTPS proxy/load balancer</li><li><strong>Microsoft Graph API</strong>: All communications over HTTPS</li><li><strong>SMB Connections</strong>: Supports SMB encryption when available on target shares</li></ul><h3 id="access-control-permissions" tabindex="-1">Access Control &amp; Permissions <a class="header-anchor" href="#access-control-permissions" aria-label="Permalink to &quot;Access Control &amp; Permissions&quot;">​</a></h3><h4 id="smb-share-access" tabindex="-1">SMB Share Access <a class="header-anchor" href="#smb-share-access" aria-label="Permalink to &quot;SMB Share Access&quot;">​</a></h4><ul><li><strong>Authentication</strong>: Username/password or Kerberos authentication</li><li><strong>ACL Processing</strong>: Extracts and processes Windows ACLs from SMB shares</li><li><strong>Principal Resolution</strong>: Maps SMB principals to Microsoft Entra (Azure AD) objects</li><li><strong>Permission Inheritance</strong>: Respects Windows file system permissions</li></ul><h4 id="microsoft-graph-integration" tabindex="-1">Microsoft Graph Integration <a class="header-anchor" href="#microsoft-graph-integration" aria-label="Permalink to &quot;Microsoft Graph Integration&quot;">​</a></h4><ul><li><strong>Service Principal Authentication</strong>: Uses Azure AD application credentials</li><li><strong>Scoped Permissions</strong>: Requires specific Graph API permissions for connector operations</li><li><strong>ACL Mapping</strong>: Translates SMB ACLs to Microsoft Graph external item permissions</li></ul><h3 id="network-security" tabindex="-1">Network Security <a class="header-anchor" href="#network-security" aria-label="Permalink to &quot;Network Security&quot;">​</a></h3><h4 id="container-security" tabindex="-1">Container Security <a class="header-anchor" href="#container-security" aria-label="Permalink to &quot;Container Security&quot;">​</a></h4><ul><li><strong>Non-Root Execution</strong>: Runs as dedicated <code>netapp</code> user (UID 1000)</li><li><strong>Minimal Privileges</strong>: Only necessary system capabilities enabled</li><li><strong>Isolated Environment</strong>: Containerized deployment with resource constraints</li></ul><h4 id="kubernetes-security-context" tabindex="-1">Kubernetes Security Context <a class="header-anchor" href="#kubernetes-security-context" aria-label="Permalink to &quot;Kubernetes Security Context&quot;">​</a></h4><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">securityContext</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  capabilities</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;SYS_ADMIN&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;DAC_READ_SEARCH&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;DAC_OVERRIDE&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  allowPrivilegeEscalation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  runAsUser</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1000</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  runAsGroup</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1000</span></span></code></pre></div><h4 id="network-isolation" tabindex="-1">Network Isolation <a class="header-anchor" href="#network-isolation" aria-label="Permalink to &quot;Network Isolation&quot;">​</a></h4><ul><li><strong>Internal Communication</strong>: Database and file system access within container</li><li><strong>External Dependencies</strong>: Microsoft Graph API (HTTPS), SMB shares (SMB/CIFS)</li><li><strong>Port Exposure</strong>: Single HTTP port (8080) for API access</li></ul><h2 id="security-controls-implementation" tabindex="-1">Security Controls Implementation <a class="header-anchor" href="#security-controls-implementation" aria-label="Permalink to &quot;Security Controls Implementation&quot;">​</a></h2><h3 id="input-validation-sanitization" tabindex="-1">Input Validation &amp; Sanitization <a class="header-anchor" href="#input-validation-sanitization" aria-label="Permalink to &quot;Input Validation &amp; Sanitization&quot;">​</a></h3><h4 id="api-input-validation" tabindex="-1">API Input Validation <a class="header-anchor" href="#api-input-validation" aria-label="Permalink to &quot;API Input Validation&quot;">​</a></h4><ul><li><strong>Pydantic Models</strong>: Strict data validation for all API inputs</li><li><strong>Path Traversal Protection</strong>: Validates file paths to prevent directory traversal</li><li><strong>SQL Injection Prevention</strong>: Parameterized queries throughout database layer</li><li><strong>XSS Protection</strong>: Input sanitization for user-provided content</li></ul><h4 id="file-system-security" tabindex="-1">File System Security <a class="header-anchor" href="#file-system-security" aria-label="Permalink to &quot;File System Security&quot;">​</a></h4><ul><li><strong>Path Validation</strong>: Ensures file paths remain within configured share boundaries</li><li><strong>File Type Filtering</strong>: Configurable file type restrictions</li><li><strong>Size Limits</strong>: Configurable file size limits for content extraction</li></ul><h3 id="audit-logging" tabindex="-1">Audit &amp; Logging <a class="header-anchor" href="#audit-logging" aria-label="Permalink to &quot;Audit &amp; Logging&quot;">​</a></h3><h4 id="comprehensive-logging" tabindex="-1">Comprehensive Logging <a class="header-anchor" href="#comprehensive-logging" aria-label="Permalink to &quot;Comprehensive Logging&quot;">​</a></h4><ul><li><strong>Operation Logs</strong>: All administrative operations logged with user attribution</li><li><strong>Security Events</strong>: Authentication attempts, authorization failures</li><li><strong>System Events</strong>: Crawl operations, errors, and system status</li><li><strong>Structured Logging</strong>: JSON-formatted logs suitable for SIEM integration</li></ul><h4 id="audit-trail" tabindex="-1">Audit Trail <a class="header-anchor" href="#audit-trail" aria-label="Permalink to &quot;Audit Trail&quot;">​</a></h4><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Example operation log structure</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;operation_type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ADD_SHARE&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;status&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;SUCCESS&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;details&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Share configuration added&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;user_id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;username&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;admin&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;timestamp&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;2024-01-01T12:00:00Z&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;metadata&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;share_path&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\\\\\\\</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">server</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\\\</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">share&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;config_changes&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="error-handling-information-disclosure" tabindex="-1">Error Handling &amp; Information Disclosure <a class="header-anchor" href="#error-handling-information-disclosure" aria-label="Permalink to &quot;Error Handling &amp; Information Disclosure&quot;">​</a></h3><h4 id="secure-error-handling" tabindex="-1">Secure Error Handling <a class="header-anchor" href="#secure-error-handling" aria-label="Permalink to &quot;Secure Error Handling&quot;">​</a></h4><ul><li><strong>Generic Error Messages</strong>: Prevents information leakage in API responses</li><li><strong>Detailed Logging</strong>: Full error details logged internally for debugging</li><li><strong>Exception Handling</strong>: Comprehensive exception handling prevents application crashes</li><li><strong>Graceful Degradation</strong>: Continues operation when non-critical components fail</li></ul><h2 id="data-privacy-compliance" tabindex="-1">Data Privacy &amp; Compliance <a class="header-anchor" href="#data-privacy-compliance" aria-label="Permalink to &quot;Data Privacy &amp; Compliance&quot;">​</a></h2><h3 id="data-processing" tabindex="-1">Data Processing <a class="header-anchor" href="#data-processing" aria-label="Permalink to &quot;Data Processing&quot;">​</a></h3><h4 id="content-handling" tabindex="-1">Content Handling <a class="header-anchor" href="#content-handling" aria-label="Permalink to &quot;Content Handling&quot;">​</a></h4><ul><li><strong>Configurable Content Persistence</strong>: Per-share control over content storage</li><li><strong>Content Extraction</strong>: Supports multiple file formats with configurable limits</li><li><strong>Metadata Only Mode</strong>: Option to index only metadata without content</li><li><strong>Data Retention</strong>: Configurable retention policies for indexed content</li></ul><h4 id="personal-data-protection" tabindex="-1">Personal Data Protection <a class="header-anchor" href="#personal-data-protection" aria-label="Permalink to &quot;Personal Data Protection&quot;">​</a></h4><ul><li><strong>ACL Preservation</strong>: Maintains original file permissions in Microsoft Graph</li><li><strong>User Attribution</strong>: Tracks user actions for compliance reporting</li><li><strong>Data Minimization</strong>: Only processes necessary file metadata and content</li><li><strong>Right to Deletion</strong>: Support for removing indexed content</li></ul><h3 id="compliance-features" tabindex="-1">Compliance Features <a class="header-anchor" href="#compliance-features" aria-label="Permalink to &quot;Compliance Features&quot;">​</a></h3><h4 id="access-control-compliance" tabindex="-1">Access Control Compliance <a class="header-anchor" href="#access-control-compliance" aria-label="Permalink to &quot;Access Control Compliance&quot;">​</a></h4><ul><li><strong>Permission Mapping</strong>: Accurate translation of SMB ACLs to Graph permissions</li><li><strong>Principal Resolution</strong>: Maps on-premises identities to cloud identities</li><li><strong>Audit Logging</strong>: Comprehensive audit trail for compliance reporting</li><li><strong>Data Lineage</strong>: Tracks data from source to Microsoft Graph</li></ul><h2 id="deployment-security" tabindex="-1">Deployment Security <a class="header-anchor" href="#deployment-security" aria-label="Permalink to &quot;Deployment Security&quot;">​</a></h2><h3 id="container-security-1" tabindex="-1">Container Security <a class="header-anchor" href="#container-security-1" aria-label="Permalink to &quot;Container Security&quot;">​</a></h3><h4 id="base-image-security" tabindex="-1">Base Image Security <a class="header-anchor" href="#base-image-security" aria-label="Permalink to &quot;Base Image Security&quot;">​</a></h4><ul><li><strong>Minimal Base Image</strong>: Python 3.13-slim with only necessary packages</li><li><strong>Regular Updates</strong>: Base image updates for security patches</li><li><strong>Vulnerability Scanning</strong>: Container image scanning recommended</li></ul><h4 id="runtime-security" tabindex="-1">Runtime Security <a class="header-anchor" href="#runtime-security" aria-label="Permalink to &quot;Runtime Security&quot;">​</a></h4><ul><li><strong>Non-Privileged User</strong>: Runs as non-root user with minimal privileges</li><li><strong>Read-Only Filesystem</strong>: Application code mounted read-only</li><li><strong>Resource Limits</strong>: CPU and memory limits prevent resource exhaustion</li></ul><h3 id="kubernetes-security" tabindex="-1">Kubernetes Security <a class="header-anchor" href="#kubernetes-security" aria-label="Permalink to &quot;Kubernetes Security&quot;">​</a></h3><h4 id="pod-security-standards" tabindex="-1">Pod Security Standards <a class="header-anchor" href="#pod-security-standards" aria-label="Permalink to &quot;Pod Security Standards&quot;">​</a></h4><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Security context configuration</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">securityContext</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  runAsUser</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1000</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  runAsGroup</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1000</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  allowPrivilegeEscalation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # Required for SMB mounting</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  capabilities</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;SYS_ADMIN&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;DAC_READ_SEARCH&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;DAC_OVERRIDE&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span></code></pre></div><h4 id="network-policies" tabindex="-1">Network Policies <a class="header-anchor" href="#network-policies" aria-label="Permalink to &quot;Network Policies&quot;">​</a></h4><ul><li><strong>Ingress Control</strong>: Restrict inbound traffic to necessary ports</li><li><strong>Egress Control</strong>: Allow outbound traffic to Microsoft Graph and SMB shares only</li><li><strong>Service Mesh</strong>: Compatible with service mesh security policies</li></ul><h3 id="secrets-management" tabindex="-1">Secrets Management <a class="header-anchor" href="#secrets-management" aria-label="Permalink to &quot;Secrets Management&quot;">​</a></h3><h4 id="environment-variables" tabindex="-1">Environment Variables <a class="header-anchor" href="#environment-variables" aria-label="Permalink to &quot;Environment Variables&quot;">​</a></h4><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Required secrets (must be provided securely)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">NETAPP_CONNECTOR_LICENSE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">license-key</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">MS_GRAPH_CLIENT_ID</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">azure-app-id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">MS_GRAPH_CLIENT_SECRET</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">azure-app-secret</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">MS_GRAPH_TENANT_ID</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">azure-tenant-id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Optional security configuration</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ACCESS_TOKEN_EXPIRE_MINUTES</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">1440</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">JWT_SECRET_KEY</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">custom-jwt-secret</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span></code></pre></div><h4 id="kubernetes-secrets" tabindex="-1">Kubernetes Secrets <a class="header-anchor" href="#kubernetes-secrets" aria-label="Permalink to &quot;Kubernetes Secrets&quot;">​</a></h4><ul><li><strong>Secret Objects</strong>: Store sensitive configuration in Kubernetes secrets</li><li><strong>Volume Mounts</strong>: Mount secrets as files rather than environment variables</li><li><strong>RBAC</strong>: Restrict access to secret objects</li></ul><h2 id="security-best-practices" tabindex="-1">Security Best Practices <a class="header-anchor" href="#security-best-practices" aria-label="Permalink to &quot;Security Best Practices&quot;">​</a></h2><h3 id="deployment-recommendations" tabindex="-1">Deployment Recommendations <a class="header-anchor" href="#deployment-recommendations" aria-label="Permalink to &quot;Deployment Recommendations&quot;">​</a></h3><ol><li><strong>Network Segmentation</strong>: Deploy in isolated network segments</li><li><strong>HTTPS Termination</strong>: Use reverse proxy/load balancer for HTTPS</li><li><strong>Regular Updates</strong>: Keep base images and dependencies updated</li><li><strong>Monitoring</strong>: Implement comprehensive monitoring and alerting</li><li><strong>Backup</strong>: Regular backups of database and configuration</li></ol><h3 id="configuration-security" tabindex="-1">Configuration Security <a class="header-anchor" href="#configuration-security" aria-label="Permalink to &quot;Configuration Security&quot;">​</a></h3><ol><li><strong>Strong Passwords</strong>: Enforce strong password policies for user accounts</li><li><strong>Token Expiration</strong>: Configure appropriate JWT token expiration times</li><li><strong>File Filtering</strong>: Configure file type and size restrictions</li><li><strong>Rate Limiting</strong>: Implement API rate limiting at proxy/gateway level</li><li><strong>Resource Limits</strong>: Set appropriate CPU and memory limits</li></ol><h3 id="operational-security" tabindex="-1">Operational Security <a class="header-anchor" href="#operational-security" aria-label="Permalink to &quot;Operational Security&quot;">​</a></h3><ol><li><strong>Regular Audits</strong>: Review operation logs and user access patterns</li><li><strong>Credential Rotation</strong>: Regular rotation of service account credentials</li><li><strong>Access Reviews</strong>: Periodic review of user accounts and permissions</li><li><strong>Incident Response</strong>: Establish procedures for security incidents</li><li><strong>Vulnerability Management</strong>: Regular security assessments and updates</li></ol><h2 id="security-considerations" tabindex="-1">Security Considerations <a class="header-anchor" href="#security-considerations" aria-label="Permalink to &quot;Security Considerations&quot;">​</a></h2><h3 id="known-limitations" tabindex="-1">Known Limitations <a class="header-anchor" href="#known-limitations" aria-label="Permalink to &quot;Known Limitations&quot;">​</a></h3><ol><li><strong>SMB Authentication</strong>: Passwords stored encrypted but accessible to application</li><li><strong>Privileged Capabilities</strong>: Requires elevated capabilities for SMB mounting</li><li><strong>Content Processing</strong>: Processes file content which may contain sensitive data</li><li><strong>Network Access</strong>: Requires network access to both SMB shares and Microsoft Graph</li></ol><h3 id="risk-mitigation" tabindex="-1">Risk Mitigation <a class="header-anchor" href="#risk-mitigation" aria-label="Permalink to &quot;Risk Mitigation&quot;">​</a></h3><ol><li><strong>Credential Security</strong>: Use dedicated service accounts with minimal privileges</li><li><strong>Network Security</strong>: Deploy in secure network segments with appropriate firewalls</li><li><strong>Data Classification</strong>: Implement data classification policies for indexed content</li><li><strong>Monitoring</strong>: Continuous monitoring for unusual access patterns or errors</li></ol><h2 id="incident-response" tabindex="-1">Incident Response <a class="header-anchor" href="#incident-response" aria-label="Permalink to &quot;Incident Response&quot;">​</a></h2><h3 id="security-event-types" tabindex="-1">Security Event Types <a class="header-anchor" href="#security-event-types" aria-label="Permalink to &quot;Security Event Types&quot;">​</a></h3><ol><li><strong>Authentication Failures</strong>: Multiple failed login attempts</li><li><strong>Authorization Violations</strong>: Access attempts to unauthorized resources</li><li><strong>System Errors</strong>: Application crashes or service failures</li><li><strong>Data Access</strong>: Unusual file access patterns or large data transfers</li></ol><h3 id="response-procedures" tabindex="-1">Response Procedures <a class="header-anchor" href="#response-procedures" aria-label="Permalink to &quot;Response Procedures&quot;">​</a></h3><ol><li><strong>Log Analysis</strong>: Review detailed logs for security events</li><li><strong>User Account Review</strong>: Investigate suspicious user activity</li><li><strong>System Isolation</strong>: Ability to quickly isolate compromised systems</li><li><strong>Data Impact Assessment</strong>: Evaluate potential data exposure</li><li><strong>Recovery Procedures</strong>: Restore from backups if necessary</li></ol><h2 id="version-information" tabindex="-1">Version Information <a class="header-anchor" href="#version-information" aria-label="Permalink to &quot;Version Information&quot;">​</a></h2><ul><li><strong>Document Version</strong>: 1.0</li><li><strong>Last Updated</strong>: 2025-07-25</li><li><strong>Connector Version</strong>: 2.1.0</li><li><strong>Review Date</strong>: Annual review required</li></ul><hr><p><em>This document contains confidential and proprietary information. Distribution should be limited to authorized personnel only.</em></p>`,96)])])}const g=a(n,[["render",r]]);export{u as __pageData,g as default};
