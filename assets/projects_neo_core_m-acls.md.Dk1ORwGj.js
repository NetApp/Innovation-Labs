import{_ as i,c as a,o as e,ag as t}from"./chunks/framework.By5zrZ8k.js";const c=JSON.parse('{"title":"Item Level Permissions (ACLs)","description":"","frontmatter":{},"headers":[],"relativePath":"projects/neo/core/m-acls.md","filePath":"projects/neo/core/m-acls.md","lastUpdated":1767691233000}'),n={name:"projects/neo/core/m-acls.md"};function l(r,s,h,o,p,d){return e(),a("div",null,[...s[0]||(s[0]=[t(`<h1 id="item-level-permissions-acls" tabindex="-1">Item Level Permissions (ACLs) <a class="header-anchor" href="#item-level-permissions-acls" aria-label="Permalink to &quot;Item Level Permissions (ACLs)&quot;">‚Äã</a></h1><p>This guide explains how to configure per-share ACL overrides to bypass file-level ACL resolution when uploading files to Microsoft Graph.</p><h2 id="overview" tabindex="-1">Overview <a class="header-anchor" href="#overview" aria-label="Permalink to &quot;Overview&quot;">‚Äã</a></h2><p>By default, the NetApp Connector extracts Access Control Lists (ACLs) from each file on SMB shares and resolves them to Microsoft Entra users and groups. This ensures that files uploaded to Microsoft Graph maintain the same access permissions as the original files.</p><p>However, there are scenarios where file-level ACL resolution is not possible or desirable:</p><ul><li><strong>No AD-to-Entra sync</strong>: The file server uses local Active Directory accounts that are not synchronized to Microsoft Entra</li><li><strong>Legacy file servers</strong>: Older file servers with non-standard ACL configurations</li><li><strong>Public shares</strong>: Shares where all content should be accessible to everyone in the organization</li><li><strong>Simplified permissions</strong>: When you want to apply uniform permissions across all files in a share</li></ul><p>For these scenarios, you can configure <strong>per-share ACL overrides</strong> that bypass file-level ACL resolution entirely.</p><h2 id="acl-override-modes" tabindex="-1">ACL Override Modes <a class="header-anchor" href="#acl-override-modes" aria-label="Permalink to &quot;ACL Override Modes&quot;">‚Äã</a></h2><table tabindex="0"><thead><tr><th>Mode</th><th>Description</th></tr></thead><tbody><tr><td><code>everyone</code></td><td>Grant access to all users in the Microsoft Entra tenant</td></tr><tr><td><code>specified</code></td><td>Grant access only to specified Entra users and/or groups</td></tr></tbody></table><p>When no ACL override is configured, the default behavior (file-level ACL resolution) is used.</p><h2 id="configuration" tabindex="-1">Configuration <a class="header-anchor" href="#configuration" aria-label="Permalink to &quot;Configuration&quot;">‚Äã</a></h2><p>ACL overrides are configured in the share&#39;s <code>rules</code> object when creating or updating a share.</p><h3 id="option-1-grant-access-to-everyone" tabindex="-1">Option 1: Grant Access to Everyone <a class="header-anchor" href="#option-1-grant-access-to-everyone" aria-label="Permalink to &quot;Option 1: Grant Access to Everyone&quot;">‚Äã</a></h3><p>Use this when all files in the share should be accessible to everyone in your organization.</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">POST /shares</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;share_path&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\\\\\\\</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">fileserver</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\\\</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">public-documents&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;username&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;domain</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\\\</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">serviceaccount&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;password&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;your-password&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;crawl_schedule&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;0 2 * * *&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;rules&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;acl_override_mode&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;everyone&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><strong>Result</strong>: All files from this share will be uploaded to Microsoft Graph with permissions that allow any user in your Entra tenant to access them.</p><h3 id="option-2-grant-access-to-specific-users-groups" tabindex="-1">Option 2: Grant Access to Specific Users/Groups <a class="header-anchor" href="#option-2-grant-access-to-specific-users-groups" aria-label="Permalink to &quot;Option 2: Grant Access to Specific Users/Groups&quot;">‚Äã</a></h3><p>Use this when files should only be accessible to specific Entra users or groups.</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">POST /shares</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;share_path&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\\\\\\\</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">fileserver</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\\\</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">department-files&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;username&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;domain</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\\\</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">serviceaccount&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;password&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;your-password&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;crawl_schedule&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;0 2 * * *&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;rules&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;acl_override_mode&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;specified&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;acl_override_principals&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;group&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;a1b2c3d4-e5f6-7890-abcd-ef1234567890&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;user&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;12345678-90ab-cdef-1234-567890abcdef&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><strong>Result</strong>: All files from this share will be uploaded to Microsoft Graph with permissions that only allow the specified users and groups to access them.</p><h2 id="finding-entra-object-ids" tabindex="-1">Finding Entra Object IDs <a class="header-anchor" href="#finding-entra-object-ids" aria-label="Permalink to &quot;Finding Entra Object IDs&quot;">‚Äã</a></h2><p>The <code>acl_override_principals</code> list requires Entra Object IDs (GUIDs), not display names. Here&#39;s how to find them:</p><h3 id="using-azure-portal" tabindex="-1">Using Azure Portal <a class="header-anchor" href="#using-azure-portal" aria-label="Permalink to &quot;Using Azure Portal&quot;">‚Äã</a></h3><ol><li>Go to <a href="https://portal.azure.com" target="_blank" rel="noreferrer">Azure Portal</a></li><li>Navigate to <strong>Microsoft Entra ID</strong> (formerly Azure Active Directory)</li><li>For users: Go to <strong>Users</strong> ‚Üí Select the user ‚Üí Copy the <strong>Object ID</strong></li><li>For groups: Go to <strong>Groups</strong> ‚Üí Select the group ‚Üí Copy the <strong>Object ID</strong></li></ol><h3 id="using-microsoft-graph-explorer" tabindex="-1">Using Microsoft Graph Explorer <a class="header-anchor" href="#using-microsoft-graph-explorer" aria-label="Permalink to &quot;Using Microsoft Graph Explorer&quot;">‚Äã</a></h3><ol><li>Go to <a href="https://developer.microsoft.com/graph/graph-explorer" target="_blank" rel="noreferrer">Graph Explorer</a></li><li>Sign in with your admin account</li><li>For users: Run <code>GET https://graph.microsoft.com/v1.0/users?$filter=displayName eq &#39;User Name&#39;</code></li><li>For groups: Run <code>GET https://graph.microsoft.com/v1.0/groups?$filter=displayName eq &#39;Group Name&#39;</code></li><li>Copy the <code>id</code> field from the response</li></ol><h3 id="using-powershell" tabindex="-1">Using PowerShell <a class="header-anchor" href="#using-powershell" aria-label="Permalink to &quot;Using PowerShell&quot;">‚Äã</a></h3><div class="language-powershell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">powershell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Install Microsoft Graph PowerShell module if needed</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Install-Module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Microsoft.Graph </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Scope CurrentUser</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Connect to Microsoft Graph</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Connect-MgGraph</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> -</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Scopes </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;User.Read.All&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Group.Read.All&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Find a user by display name</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Get-MgUser</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> -</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Filter </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;displayName eq &#39;John Doe&#39;&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Select-Object</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DisplayName</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Find a group by display name</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Get-MgGroup</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> -</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Filter </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;displayName eq &#39;Marketing Team&#39;&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Select-Object</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DisplayName</span></span></code></pre></div><h2 id="updating-existing-shares" tabindex="-1">Updating Existing Shares <a class="header-anchor" href="#updating-existing-shares" aria-label="Permalink to &quot;Updating Existing Shares&quot;">‚Äã</a></h2><p>You can add or modify ACL overrides on existing shares using the PATCH endpoint:</p><h3 id="add-acl-override-to-existing-share" tabindex="-1">Add ACL Override to Existing Share <a class="header-anchor" href="#add-acl-override-to-existing-share" aria-label="Permalink to &quot;Add ACL Override to Existing Share&quot;">‚Äã</a></h3><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">PATCH /shares/{</span><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic;">share_id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;rules&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;acl_override_mode&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;everyone&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="change-from-everyone-to-specified-principals" tabindex="-1">Change from Everyone to Specified Principals <a class="header-anchor" href="#change-from-everyone-to-specified-principals" aria-label="Permalink to &quot;Change from Everyone to Specified Principals&quot;">‚Äã</a></h3><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">PATCH /shares/{</span><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic;">share_id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;rules&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;acl_override_mode&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;specified&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;acl_override_principals&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      {</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;group&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;a1b2c3d4-e5f6-7890-abcd-ef1234567890&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="remove-acl-override-return-to-file-level-resolution" tabindex="-1">Remove ACL Override (Return to File-Level Resolution) <a class="header-anchor" href="#remove-acl-override-return-to-file-level-resolution" aria-label="Permalink to &quot;Remove ACL Override (Return to File-Level Resolution)&quot;">‚Äã</a></h3><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">PATCH /shares/{</span><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic;">share_id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;rules&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;acl_override_mode&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><blockquote style="background-color:#e7f3ff;border-left:4px solid #2196F3;padding:10px;margin:10px 0;"><strong>üìò Note:</strong> After changing ACL settings, you may want to trigger a re-crawl to update permissions on existing files: <pre><code>POST /shares/{share_id}/crawl
</code></pre></blockquote><h2 id="combining-with-other-rules" tabindex="-1">Combining with Other Rules <a class="header-anchor" href="#combining-with-other-rules" aria-label="Permalink to &quot;Combining with Other Rules&quot;">‚Äã</a></h2><p>ACL overrides can be combined with other share rules:</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;share_path&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\\\\\\\</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">fileserver</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\\\</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">documents&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;username&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;domain</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\\\</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">serviceaccount&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;password&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;your-password&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;rules&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;acl_override_mode&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;specified&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;acl_override_principals&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;group&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;a1b2c3d4-e5f6-7890-abcd-ef1234567890&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;include_patterns&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;*.pdf&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;*.docx&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;*.xlsx&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;max_file_size&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">104857600</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;modified_within_days&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">365</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>This configuration:</p><ul><li>Grants access only to the specified group</li><li>Only processes PDF, Word, and Excel files</li><li>Limits file size to 100MB</li><li>Only includes files modified in the last year</li></ul><h2 id="validation-rules" tabindex="-1">Validation Rules <a class="header-anchor" href="#validation-rules" aria-label="Permalink to &quot;Validation Rules&quot;">‚Äã</a></h2><p>The connector validates ACL override configurations:</p><table tabindex="0"><thead><tr><th>Validation</th><th>Error Message</th></tr></thead><tbody><tr><td>Invalid mode</td><td><code>Invalid acl_override_mode &#39;xyz&#39;. Must be one of: everyone, specified</code></td></tr><tr><td>Missing principals</td><td><code>acl_override_principals must contain at least one principal when acl_override_mode=&#39;specified&#39;</code></td></tr><tr><td>Invalid principal type</td><td><code>acl_override_principals[0] &#39;type&#39; must be &#39;user&#39; or &#39;group&#39;</code></td></tr><tr><td>Missing principal ID</td><td><code>acl_override_principals[0] missing required &#39;id&#39; field</code></td></tr></tbody></table><h2 id="monitoring" tabindex="-1">Monitoring <a class="header-anchor" href="#monitoring" aria-label="Permalink to &quot;Monitoring&quot;">‚Äã</a></h2><p>Check application logs for ACL override activity:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># ACL override in use</span></span>
<span class="line"><span>&quot;Using share-level ACL override (everyone) for /path/to/file.pdf&quot;</span></span>
<span class="line"><span>&quot;Using share-level ACL override (specified principals) for /path/to/file.docx&quot;</span></span>
<span class="line"><span></span></span>
<span class="line"><span># File-level ACL resolution (default behavior)</span></span>
<span class="line"><span>&quot;Resolving ACLs for /path/to/file.pdf using cached resolution&quot;</span></span></code></pre></div><h2 id="security-considerations" tabindex="-1">Security Considerations <a class="header-anchor" href="#security-considerations" aria-label="Permalink to &quot;Security Considerations&quot;">‚Äã</a></h2><blockquote style="background-color:#ffe6e6;border-left:4px solid #f44336;padding:10px;margin:10px 0;"><strong>‚ùó Important:</strong> ACL overrides bypass the original file permissions. Consider the following: <ol><li><strong>Data Exposure Risk</strong>: Using <code>acl_override_mode: &quot;everyone&quot;</code> makes all files in the share accessible to everyone in your Entra tenant. Only use this for truly public content.</li><li><strong>Audit Trail</strong>: The original file ACLs are still extracted and stored in the database for auditing purposes, even when overrides are applied.</li><li><strong>Principle of Least Privilege</strong>: When using <code>specified</code> mode, grant access only to the users and groups that genuinely need it.</li><li><strong>Regular Review</strong>: Periodically review shares with ACL overrides to ensure the permissions are still appropriate.</li></ol></blockquote><h2 id="comparison-acl-override-vs-acl-strict-mode" tabindex="-1">Comparison: ACL Override vs ACL_STRICT_MODE <a class="header-anchor" href="#comparison-acl-override-vs-acl-strict-mode" aria-label="Permalink to &quot;Comparison: ACL Override vs ACL_STRICT_MODE&quot;">‚Äã</a></h2><table tabindex="0"><thead><tr><th>Feature</th><th>ACL Override</th><th>ACL_STRICT_MODE</th></tr></thead><tbody><tr><td>Scope</td><td>Per-share</td><td>Global (all shares)</td></tr><tr><td>Purpose</td><td>Bypass file-level ACL resolution</td><td>Control fallback behavior when ACLs can&#39;t be resolved</td></tr><tr><td>Configuration</td><td>Share rules</td><td>Environment variable</td></tr><tr><td>Precedence</td><td>Takes priority</td><td>Only applies when no ACL override is set</td></tr></tbody></table><p>When <code>acl_override_mode</code> is set on a share, the global <code>ACL_STRICT_MODE</code> setting is ignored for that share.</p><h2 id="troubleshooting" tabindex="-1">Troubleshooting <a class="header-anchor" href="#troubleshooting" aria-label="Permalink to &quot;Troubleshooting&quot;">‚Äã</a></h2><h3 id="files-not-appearing-in-search-results" tabindex="-1">Files Not Appearing in Search Results <a class="header-anchor" href="#files-not-appearing-in-search-results" aria-label="Permalink to &quot;Files Not Appearing in Search Results&quot;">‚Äã</a></h3><ol><li>Verify the share has been crawled: <code>GET /shares/{share_id}</code></li><li>Check the share status is <code>ready</code></li><li>Verify the ACL override configuration is correct</li><li>Check logs for any upload errors</li></ol><h3 id="permission-denied-errors" tabindex="-1">Permission Denied Errors <a class="header-anchor" href="#permission-denied-errors" aria-label="Permalink to &quot;Permission Denied Errors&quot;">‚Äã</a></h3><ol><li>Ensure the Entra Object IDs are correct</li><li>Verify the users/groups exist in your Entra tenant</li><li>Check that the Microsoft Graph connector has appropriate permissions</li></ol><h3 id="acl-override-not-taking-effect" tabindex="-1">ACL Override Not Taking Effect <a class="header-anchor" href="#acl-override-not-taking-effect" aria-label="Permalink to &quot;ACL Override Not Taking Effect&quot;">‚Äã</a></h3><ol><li>Confirm the share rules were saved: <code>GET /shares/{share_id}</code> and check the <code>rules</code> field</li><li>Trigger a re-crawl: <code>POST /shares/{share_id}/crawl</code></li><li>Check logs for &quot;Using share-level ACL override&quot; messages</li></ol>`,60)])])}const E=i(n,[["render",l]]);export{c as __pageData,E as default};
